## ðŸŽ¯ Objective

Convert the given **Sybase ASE SQL schema** to a **fully compatible IBM Db2 SQL schema**.

The schema includes:
- Table definitions
- Primary, foreign, and unique key constraints
- Default values and check constraints
- Views
- Indexes (**must be preserved â€“ indexing is a critical part of this POC**)

The goal is to **accurately transform the entire DDL** to valid Db2 SQL syntax, preserving all intent, structure, constraints, and performance considerations.

---

## ðŸ“¥ Input Format (Sybase Schema Example)

Below is an example of the kind of Sybase schema youâ€™ll receive:

```sql
CREATE TABLE users (
    user_id         INT IDENTITY PRIMARY KEY,
    username        VARCHAR(50) NOT NULL UNIQUE,
    email           VARCHAR(100) NOT NULL UNIQUE,
    registered_on   DATETIME DEFAULT GETDATE(),
    profile_picture IMAGE NULL,
    bio             TEXT NULL
);

CREATE TABLE orders (
    order_id     INT IDENTITY PRIMARY KEY,
    user_id      INT NOT NULL,
    order_date   DATETIME DEFAULT GETDATE(),
    total_amount MONEY CHECK (total_amount >= 0),
    status       VARCHAR(20) DEFAULT 'PENDING',
    invoice_pdf  IMAGE NULL,
    CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE INDEX idx_username ON users(username);
CREATE INDEX idx_order_user ON orders(user_id);

---

## ðŸ“¤ Expected Output Format (Db2-Compatible Schema)

You should return the schema above converted to valid IBM Db2 SQL, like this:

```sql
CREATE TABLE users (
    user_id         INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username        VARCHAR(50) NOT NULL UNIQUE,
    email           VARCHAR(100) NOT NULL UNIQUE,
    registered_on   TIMESTAMP DEFAULT CURRENT TIMESTAMP,
    profile_picture BLOB,
    bio             CLOB
);

CREATE TABLE orders (
    order_id     INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id      INT NOT NULL,
    order_date   TIMESTAMP DEFAULT CURRENT TIMESTAMP,
    total_amount DECIMAL(15,2) CHECK (total_amount >= 0),
    status       VARCHAR(20) DEFAULT 'PENDING',
    invoice_pdf  BLOB,
    CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE INDEX idx_username ON users(username);
CREATE INDEX idx_order_user ON orders(user_id);
```

---

## ðŸ§  Step-by-Step Instructions for Conversion

1. **Convert Data Types:**

   | Sybase Type | Db2 Type                |
   | ----------- | ----------------------- |
   | `DATETIME`  | `TIMESTAMP`             |
   | `MONEY`     | `DECIMAL(15,2)`         |
   | `TEXT`      | `CLOB`                  |
   | `IMAGE`     | `BLOB`                  |
   | `BIT`       | `SMALLINT` or `CHAR(1)` |

2. **Identity Columns:**

   * Sybase: `INT IDENTITY`
   * Db2: `INT GENERATED BY DEFAULT AS IDENTITY`

3. **Default Functions:**

   * `GETDATE()` â†’ `CURRENT TIMESTAMP`
   * `ISNULL(col, val)` â†’ `COALESCE(col, val)`

4. **Indexes:**

   * Retain all `CREATE INDEX` statements
   * Preserve column order in composite indexes
   * Ensure uniqueness and index names are retained
   * This is **crucial** for performance tuning in this POC

5. **Constraints:**

   * Translate all `PRIMARY KEY`, `FOREIGN KEY`, `UNIQUE`, `CHECK`, and `DEFAULT` constraints
   * Keep named constraints (e.g., `CONSTRAINT fk_user FOREIGN KEY ...`)
   * Don't omit constraints unless absolutely necessary

6. **View Conversion:**

   * Convert `CREATE VIEW` statements using Db2 syntax
   * Replace Sybase functions with Db2-compatible equivalents
   * Ensure all joins and aggregations remain valid

7. **Formatting Rules:**

   * Output a **single valid Db2-compatible DDL script**
   * Use clean formatting and proper SQL style
   * Do **not** include comments, logs, or explanations unless explicitly requested

---

## ðŸš« Do Not:

* Skip or simplify **indexes** â€” they are vital to this project
* Alter the structure or logic of schema objects
* Omit constraints or views
* Include extra explanation or commentary unless asked

---

## âœ… Your Task

Convert the full Sybase DDL input to a valid **IBM Db2 DDL script** and return only the converted schema.

Do not include any explanation, just the converted SQL.

---

## Sybase Schema

{{ schema }}

